(this["webpackJsonpbooks-app"]=this["webpackJsonpbooks-app"]||[]).push([[0],{13:function(t,e,a){t.exports={container:"Catalog_container__IdZ7A",results:"Catalog_results__l1P07",items:"Catalog_items__2gF6P",item:"Catalog_item__27CRd",image_container:"Catalog_image_container__GLwh9",info:"Catalog_info__3tPZs",category:"Catalog_category__2vL5T",authors:"Catalog_authors__2uMiT",title:"Catalog_title__C7NTH",loadMore:"Catalog_loadMore__3BPg6",active:"Catalog_active__3PXug"}},14:function(t,e,a){t.exports={container:"Book_container__3NlpW",book_container:"Book_book_container__3Fb5j",cover_container:"Book_cover_container__qvrf1",info:"Book_info__1p3Uj",categories:"Book_categories__1s_Gk",title:"Book_title__3nYNb",authors:"Book_authors__3CLhT",description:"Book_description__zjlLw"}},15:function(t,e,a){t.exports={container:"Search_container__wBdFf",form:"Search_form__C6JUD",search_field:"Search_search_field__1UWdk",settings_wrapper:"Search_settings_wrapper__2Vhu3",category:"Search_category__3coHS",sorting:"Search_sorting__2qBwW",required:"Search_required__DCEcc",error:"Search_error__2qK09"}},25:function(t,e,a){t.exports={modal__container:"Preloader_modal__container__17bfc",modal:"Preloader_modal__1vRD4",main:"Preloader_main__1Ew_b"}},42:function(t,e,a){t.exports={app_wrapper:"App_app_wrapper__5i7wO"}},50:function(t,e,a){},77:function(t,e,a){"use strict";a.r(e);var n=a(24),o=a.n(n),c=(a(50),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),o(t),c(t),i(t)}))}),i=a(2),r=a(0),s=a(16),l=a(6),u=a(21),j=a(42),d=a.n(j),b=a(3),m=a(8),h=a(30),_=a.n(h),g=function(t,e,a){var n=t.category,o=t.search,c=t.sorting;return _.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(o,"+subject:").concat("all"===n?"":n,"&orderBy=").concat(c,"&startIndex=").concat(e,"&maxResults=").concat(a,"&key=AIzaSyC1IPy_Wayo3fgI14j-i2FAqEkAbRq9jQU"),{}).then((function(t){return t.data}))},O=function(t){return _.a.get("https://www.googleapis.com/books/v1/volumes/".concat(t,"&key=AIzaSyC1IPy_Wayo3fgI14j-i2FAqEkAbRq9jQU"),{}).then((function(t){return t.data}))},f={isFetching:!1,book:{}},v=function(t){return{type:"GET_BOOK",book:t}},p=function(t){return{type:"IS_FETCHING",isFetching:t}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_BOOK":return Object(i.a)(Object(i.a)({},t),{},{book:e.book});case"IS_FETCHING":return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});default:return t}},I=a(25),k=a.n(I),C=a.p+"static/media/preloader.b15feea2.png",F=a(1),N=function(){return Object(F.jsx)("div",{className:k.a.modal__container,children:Object(F.jsx)("div",{className:k.a.modal,children:Object(F.jsx)("div",{className:k.a.main,onClick:function(t){return t.stopPropagation()},children:Object(F.jsx)("img",{src:C})})})})},y=a(14),w=a.n(y),B=a.p+"static/media/no_cover_available.569d55d7.jpg",S=function(t){var e,a,n,o,c,i,r,s,l,u=t.book;return t.isFetching?Object(F.jsx)(N,{}):Object(F.jsx)("div",{className:w.a.container,children:Object(F.jsxs)("div",{className:w.a.book_container,children:[Object(F.jsx)("div",{className:w.a.cover_container,children:Object(F.jsx)("img",{src:null!==(e=u.volumeInfo)&&void 0!==e&&null!==(a=e.imageLinks)&&void 0!==a&&a.thumbnail?null===(n=u.volumeInfo.imageLinks)||void 0===n?void 0:n.thumbnail:B,alt:"cover is not available"})}),Object(F.jsxs)("div",{className:w.a.info,children:[Object(F.jsx)("div",{className:w.a.categories,children:null===(o=u.volumeInfo)||void 0===o||null===(c=o.categories)||void 0===c?void 0:c.map((function(t){return t}))}),Object(F.jsx)("div",{className:w.a.title,children:null===(i=u.volumeInfo)||void 0===i?void 0:i.title}),Object(F.jsx)("div",{className:w.a.authors,children:null===(r=u.volumeInfo)||void 0===r||null===(s=r.authors)||void 0===s?void 0:s.map((function(t){return t}))}),(null===(l=u.volumeInfo)||void 0===l?void 0:l.description)&&Object(F.jsx)("div",{className:w.a.description,children:u.volumeInfo.description})]})]})})},T=Object(s.b)((function(t){return{book:t.Book.book,isFetching:t.Book.isFetching}}),{getBook:function(t){return function(){var e=Object(m.a)(Object(b.a)().mark((function e(a){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(p(!0)),e.next=3,O(t);case 3:n=e.sent,a(v(n)),a(p(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(t){return Object(r.useEffect)((function(){t.getBook(t.match.params.volumeId)}),[]),Object(F.jsx)(S,{book:t.book,isFetching:t.isFetching})})),L=a(18),E=a(5),q={startIndex:0,maxResults:30,formData:{},totalItems:null,isFetching:!1,items:[]},P=function(t,e,a){return{type:"GET_CATALOG",catalog:t,startIndex:e,formData:a}},A=function(t){return{type:"IS_FETCHING",isFetching:t}},G=function(t,e){return function(){var a=Object(m.a)(Object(b.a)().mark((function a(n,o){var c,i;return Object(b.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(A(!0)),c=o().Catalog.maxResults,a.next=4,g(t,e,c);case 4:i=a.sent,n(P(i,e,t)),n(A(!1));case 7:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}()},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_CATALOG":return Object(i.a)(Object(i.a)({},t),{},{startIndex:e.startIndex,formData:e.formData,totalItems:e.catalog.totalItems,items:e.catalog.totalItems&&e.catalog.totalItems>0?0===e.startIndex?Object(E.a)(e.catalog.items):[].concat(Object(E.a)(t.items),Object(E.a)(e.catalog.items)):[]});case"IS_FETCHING":return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});default:return t}},R=a(13),M=a.n(R),H=function(t){return Object(F.jsxs)(F.Fragment,{children:[null!=t.totalItems&&Object(F.jsxs)("div",{className:M.a.container,children:[Object(F.jsx)("div",{className:M.a.results,children:0===t.totalItems?Object(F.jsx)("span",{children:"No results found"}):Object(F.jsxs)("span",{children:["Found ",t.totalItems," results"]})}),t.totalItems>0&&Object(F.jsxs)("div",{className:M.a.items,children:[t.items&&t.items.map((function(t,e){var a,n,o,c,i;return Object(F.jsxs)(u.b,{className:M.a.item,to:"/book/".concat(t.id),children:[Object(F.jsx)("div",{className:M.a.image_container,children:Object(F.jsx)("img",{src:null!==(a=t.volumeInfo)&&void 0!==a&&null!==(n=a.imageLinks)&&void 0!==n&&n.thumbnail?null===(o=t.volumeInfo)||void 0===o||null===(c=o.imageLinks)||void 0===c?void 0:c.thumbnail:B,alt:"no cover available"})}),Object(F.jsxs)("div",{className:M.a.info,children:[Object(F.jsx)("div",{className:M.a.category,children:null===(i=t.volumeInfo.categories)||void 0===i?void 0:i[0]}),Object(F.jsx)("div",{className:M.a.title,children:t.volumeInfo.title}),Object(F.jsx)("div",{className:M.a.authors,children:t.volumeInfo.authors&&t.volumeInfo.authors.map((function(t){return Object(F.jsx)("span",{children:t},t)}))})]})]},t.id+e)}))," "]}),t.totalItems>0&&t.totalItems!==t.items.length&&Object(F.jsx)("span",{className:"".concat(M.a.loadMore," ").concat(t.isFetching?M.a.active:""),onClick:t.onLoadMore,children:t.isFetching?Object(F.jsx)("img",{src:C}):"Load More"})]}),!t.isFetchingButton&&t.isFetching&&Object(F.jsx)(N,{})]})},U=Object(s.b)((function(t){return{items:t.Catalog.items,totalItems:t.Catalog.totalItems,startIndex:t.Catalog.startIndex,maxResults:t.Catalog.maxResults,formData:t.Catalog.formData,isFetching:t.Catalog.isFetching}}),{getCatalog:G})((function(t){var e=Object(r.useState)(!1),a=Object(L.a)(e,2),n=a[0],o=a[1];return Object(F.jsx)(H,{items:t.items,totalItems:t.totalItems,isFetching:t.isFetching,onLoadMore:function(){t.getCatalog(t.formData,t.startIndex+t.maxResults),o(!0)},isFetchingButton:n})})),W=a(45),z=a(15),J=a.n(z),K=function(t){var e=Object(W.a)(),a=e.register,n=e.handleSubmit,o=e.formState.errors,c=Object(l.f)();return Object(F.jsx)("div",{className:J.a.container,children:Object(F.jsx)("div",{className:J.a.form,children:Object(F.jsxs)("form",{onSubmit:n((function(e){t.getCatalog(e,0),c.push("/catalog")})),children:[Object(F.jsx)("h2",{children:"Search for books"}),Object(F.jsxs)("div",{className:"".concat(J.a.search_field," ").concat(o.search?J.a.required:""),children:[Object(F.jsx)("input",Object(i.a)(Object(i.a)({},a("search",{required:{value:!0,message:"this field is required"}})),{},{type:"text",placeholder:"start searching..."})),Object(F.jsx)("label",{htmlFor:"submit"}),Object(F.jsx)("button",{type:"submit",id:"submit"}),o.search&&Object(F.jsx)("div",{className:J.a.error,children:o.search.message})]}),Object(F.jsxs)("div",{className:J.a.settings_wrapper,children:[Object(F.jsxs)("span",{className:J.a.category,children:[Object(F.jsx)("label",{htmlFor:"category",children:"Categories"}),Object(F.jsxs)("select",Object(i.a)(Object(i.a)({},a("category")),{},{defaultValue:"all",children:[Object(F.jsx)("option",{children:"all"}),Object(F.jsx)("option",{children:"art"}),Object(F.jsx)("option",{children:"biography"}),Object(F.jsx)("option",{children:"computers"}),Object(F.jsx)("option",{children:"history"}),Object(F.jsx)("option",{children:"medical"}),Object(F.jsx)("option",{children:"poetry"})]}))]}),Object(F.jsxs)("span",{className:J.a.sorting,children:[Object(F.jsx)("label",{htmlFor:"sorting",children:"Sorting by"}),Object(F.jsxs)("select",Object(i.a)(Object(i.a)({},a("sorting")),{},{defaultValue:"relevance",children:[Object(F.jsx)("option",{children:"relevance"}),Object(F.jsx)("option",{children:"newest"})]}))]})]})]})})})},V=Object(s.b)((function(t){return{}}),{getCatalog:G})((function(t){return Object(F.jsx)(K,{getCatalog:t.getCatalog})})),Q=a(26),Z=a(44),X=Object(Q.b)({Catalog:D,Book:x}),Y=Object(Q.c)(X,Object(Q.a)(Z.a));window.store=Y;var $=Y,tt=function(){return Object(F.jsxs)("div",{className:d.a.app_wrapper,children:[Object(F.jsx)(l.a,{exact:!0,from:"/",to:"/search"}),Object(F.jsx)(V,{}),Object(F.jsx)(l.b,{path:"/catalog",render:function(){return Object(F.jsx)(U,{})}}),Object(F.jsx)(l.b,{path:"/book/:volumeId",render:function(t){return Object(F.jsx)(T,Object(i.a)({},t))}})]})},et=function(){return Object(F.jsx)(u.a,{children:Object(F.jsx)(s.a,{store:$,children:Object(F.jsx)(tt,{})})})};o.a.render(Object(F.jsx)(et,{}),document.getElementById("root")),c()}},[[77,1,2]]]);
//# sourceMappingURL=main.cdfbb35e.chunk.js.map